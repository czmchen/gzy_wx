<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yq.dao.AddressDao">
    <insert id="insert" parameterType="java.util.Map">
	insert tb_address(province,city,
	area,town,addr_user,addr_name,addr_tel,oppen_id,sort,cityPickerCN,isCustomerRegist) 
	values
	(#{province},#{city},#{area},#{town},
	#{addr_user},#{addr_name},#{addr_tel},#{oppen_id},#{sort},#{cityPickerCN},#{isCustomerRegist}
	) 
    </insert>
    
    <update id="update" parameterType="java.util.Map">
	update tb_address set province=#{province},city=#{city},area=#{area},town=#{town},addr_user=#{addr_user},addr_name=#{addr_name},addr_tel=#{addr_tel},cityPickerCN=#{cityPickerCN},isCustomerRegist=#{isCustomerRegist}
	 where  addr_id=#{addr_id}
    </update>
    
    <delete id="delete" parameterType="java.util.Map">
    delete from  tb_address  where addr_id=#{addr_id}
    </delete>
    
    <update id="sort" parameterType="java.util.Map">
    update tb_address set sort=#{sort} where  addr_id=#{addr_id}
    </update>
    
    <select id="list" resultType="com.yq.entity.Address">
    select * from tb_address where oppen_id=#{oppen_id} order by sort desc
    </select>
    
     <select id="listById" resultType="com.yq.entity.Address">
    select * from tb_address where addr_id=#{addr_id}
    </select>
    
     <select id="getAddressById" resultType="com.yq.entity.Address">
    	select * from tb_address
	    	<where> 
	    	    1=1
		    	<if test="oppen_id !=null and oppen_id !=''">  
		    		 and oppen_id=#{oppen_id}
		    	</if>
		    	<if test="isCustomerRegist!=0">  
		    		 and isCustomerRegist=#{isCustomerRegist}
		    	</if>
		    	<if test="addr_id !=null and addr_id !=0">  
		    		 and addr_id=#{addr_id}
		    	</if>
	    	</where>
    </select>
    
    <select id="count" resultType="int">
    select count(1) from tb_address where  oppen_id=#{oppen_id}
    </select>
    

    
</mapper>